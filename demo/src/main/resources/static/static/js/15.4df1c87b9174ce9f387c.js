webpackJsonp([15],{"/0UN":function(e,t,n){n("Iumf");var a=n("VU/8")(n("9807"),n("Rxxb"),null,null);e.exports=a.exports},"/jQl":function(e,t){},"1jKx":function(e,t,n){"use strict";function a(e,t){return o()(e)===o()(t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("mvHQ"),o=n.n(i),s=n("pFYg"),c=n.n(s);t.default={name:"checker-item",props:{value:{type:[String,Number,Object],required:!0},disabled:Boolean},watch:{disabled:function(e){e&&"radio"===this.$parent.type&&this.value===this.$parent.currentValue&&(this.$parent.currentValue="")}},computed:{classNames:function(){var e=this,t="string"==typeof this.value||"number"==typeof this.value,n={"vux-tap-active":!this.disabled};if(this.$parent.defaultItemClass&&(n[this.$parent.defaultItemClass]=!0),this.$parent.selectedItemClass){var i=!1;if("radio"===this.$parent.type)t&&this.$parent.currentValue===this.value?i=!0:"object"===c()(this.value)&&a(this.$parent.currentValue,this.value)&&(i=!0);else if("string"==typeof this.value)this.$parent.currentValue.indexOf(this.value)>-1&&(i=!0);else if(this.$parent.currentValue&&this.$parent.currentValue.length){var o=this.$parent.currentValue.filter(function(t){return a(t,e.value)});i=o.length>0}n[this.$parent.selectedItemClass]=i}return this.$parent.disabledItemClass&&(n[this.$parent.disabledItemClass]=this.disabled),n}},methods:{select:function(){"radio"===this.$parent.type?this.selectRadio():this.selectCheckbox()},selectRadio:function(){this.disabled||(this.$parent.currentValue===this.value?this.$parent.radioRequired||(this.$parent.currentValue=""):this.$parent.currentValue=this.value),this.$emit("on-item-click",this.value,this.disabled)},selectCheckbox:function(){this.$parent.currentValue&&null!==this.$parent.currentValue||(this.$parent.currentValue=[]);var e="string"==typeof this.value||"number"==typeof this.value;if(!this.disabled){var t=-1;t=e?this.$parent.currentValue.indexOf(this.value):this.$parent.currentValue.map(function(e){return o()(e)}).indexOf(o()(this.value)),t>-1?this.$parent.currentValue.splice(t,1):(!this.$parent.max||this.$parent.max&&null!==this.$parent.currentValue&&this.$parent.currentValue.length<this.$parent.max)&&(this.$parent.currentValue&&this.$parent.currentValue.length||(this.$parent.currentValue=[]),this.$parent.currentValue.push(this.value))}this.$emit("on-item-click",this.value,this.disabled)}}}},"8jQI":function(e,t){},9807:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"checker",props:{defaultItemClass:String,selectedItemClass:String,disabledItemClass:String,type:{type:String,default:"radio"},value:[String,Number,Array,Object],max:Number,radioRequired:Boolean},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e),this.$emit("on-change",e)}},data:function(){return{currentValue:this.value}}}},H9q0:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"vux-checker-item",class:e.classNames,on:{click:e.select}},[e._t("default")],2)},staticRenderFns:[]}},IYGi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("//Fk"),i=n.n(a),o=n("I3G/"),s=n.n(o),c=n("/0UN"),r=n.n(c),l=n("hGvq"),u=n.n(l),d=n("2sLL"),p=n.n(d),h=n("rLAy"),f=(n.n(h),n("3BeM")),x=n("Msp2"),m=(n.n(x),n("Bfwr")),b=(n.n(m),n("Y+qm")),v=n("S8Wg"),g=n.n(v),k=n("jijt"),y=(n.n(k),n("tpu8")),w=n.n(y),$=n("mtWM"),C=n.n($);s.a.use(b.a),s.a.use(f.a);var _=n("PZHe"),V=n("CWSs");C.a.defaults.timeout=1e4;var j=n("OAwv");t.default={created:function(){document.title="智慧KTV服务"},mounted:function(){this.getCompanyListData()},data:function(){return{agreed:!0,companyList:[],selectedCompany:[],scrollTop:0,token:"",secid:""}},computed:{canNotSubmit:function(){return 0==this.selectedCompany.length||!this.agreed}},methods:{submit:function(){var e=this;if(console.log(this.selectedCompany),0==this.selectedCompany.length)return void this.$vux.toast.show({text:"请选择开通的场所~",type:"text",width:"200px"});var t=[];this.selectedCompany.forEach(function(e){t.push(e.companyid)}),this.$vux.loading.show({text:"提交中"}),this.getUserToken().then(function(n){var a=n.token,i=n.secid;C.a.post(V.createAjaxUrl("wisdomKTVActivate/activate"),j.stringify({companyid:t.join(",")}),{headers:{"x-auth-token":a,"x-auth-secid":i,"Content-Type":"application/x-www-form-urlencoded;charset=utf-8 "}}).then(function(t){var n=t.data;console.log(n),e.$vux.loading.hide(),0==n.ret?(n.msg.length>0&&e.$vux.toast.show({text:n.msg,type:"text"}),e.getCompanyListData()):(console.log(n.msg),e.$vux.toast.show({text:n.msg,type:"text"}))}).catch(function(t){e.$vux.loading.hide()})})},getUserToken:function(){var e=this;return new i.a(function(t){w.a.isEmpty(e.token)||w.a.isEmpty(e.secid)?(console.log("request token and secid"),_.getCompanyInfo(function(n){var a=n.token,i=n.secid;e.token=a,e.secid=i,t({token:a,secid:i})})):(console.log("success token and secid"),t({token:e.token,secid:e.secid}))})},getCompanyListData:function(){var e=this;this.$vux.loading.show({text:"加载中"});try{this.getUserToken().then(function(t){var n=t.token,a=t.secid;C.a.post(V.createAjaxUrl("wisdomKTVActivate/queryByUser"),{},{headers:{"x-auth-token":n,"x-auth-secid":a}}).then(function(t){if(console.log(t),0==t.data.ret&&"Array"===w.a.type(t.data.data)){var n=t.data.data.map(function(e){return e.companyName=e.companyname,e.companyId=e.companyid,e.actived=1==e.managerappstatus,e.status=e.actived?"已开通":"未开通",e.checked=!1,e});e.companyList=n,e.selectedCompany=[]}e.refreshScroll(),e.$vux.loading.hide()}).catch(function(t){console.log(t),e.$vux.loading.hide()})})}catch(e){console.log(e),this.$vux.loading.hide()}},onScroll:function(e){this.scrollTop=e},refreshScroll:function(){var e=this;this.$nextTick(function(){e.$refs.scroller.reset({top:e.scrollTop})})}},components:{XButton:p.a,Checker:r.a,CheckerItem:u.a,Scroller:g.a}}},Iumf:function(e,t){},"OLs+":function(e,t,n){e.exports=n.p+"static/img/btn_s.38cc9ca.png"},Rxxb:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"vux-checker-box"},[e._t("default")],2)},staticRenderFns:[]}},"S+oW":function(e,t,n){e.exports=n.p+"static/img/bg.a5c471f.png"},V8Ph:function(e,t,n){e.exports=n.p+"static/img/check_n.a9a8a40.png"},Yo7i:function(e,t,n){var a=n("vS6d");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("10a82659",a,!0)},dbxP:function(e,t,n){n("Yo7i");var a=n("VU/8")(n("IYGi"),n("vy4+"),"data-v-57c68ee2",null);e.exports=a.exports},hGvq:function(e,t,n){n("/jQl");var a=n("VU/8")(n("1jKx"),n("H9q0"),null,null);e.exports=a.exports},"hoG/":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("i",{staticClass:"weui-loading"})},staticRenderFns:[]}},jVEg:function(e,t,n){e.exports=n.p+"static/img/check_s.c9e9b66.png"},jijt:function(e,t,n){n("8jQI");var a=n("VU/8")(n("rCr9"),n("hoG/"),null,null);e.exports=a.exports},kqJI:function(e,t,n){e.exports=n.p+"static/img/check_d.a3a7f96.png"},qtPQ:function(e,t,n){e.exports=n.p+"static/img/btn_n.cd65ba4.png"},rCr9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"inline-loading"}},"s/VG":function(e,t,n){e.exports=n.p+"static/img/logo.a5a67de.png"},vS6d:function(e,t,n){t=e.exports=n("FZ+f")(),t.push([e.i,"\n.box[data-v-57c68ee2] {\n  background: #f2f2f2;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n}\n.box > .header[data-v-57c68ee2] {\n  position: relative;\n}\n.box > .header .logo[data-v-57c68ee2] {\n  max-width: 100%;\n  height: auto;\n  display: block;\n}\n.box > .content[data-v-57c68ee2] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  background-size: 100% 100%;\n  background: url("+n("S+oW")+") repeat;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n}\n.box > .content .title[data-v-57c68ee2] {\n  margin: 0 5%;\n  padding: 10px;\n  background-color: rgba(0, 49, 115, 0.3);\n}\n.box > .content .title .desc[data-v-57c68ee2] {\n  font-size: 12px;\n  color: #ffffff;\n  text-indent: 25px;\n  /*word-break:break-all;*/\n  /*display:-webkit-box;*/\n  /*-webkit-line-clamp:4;*/\n  /*-webkit-box-orient:vertical;*/\n  /*overflow:hidden;*/\n  overflow: scroll;\n  max-height: 75px;\n}\n.box > .content .list[data-v-57c68ee2] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  margin: 15px 5%;\n  background-color: #ffffff00;\n  min-height: 100px;\n  overflow: hidden;\n}\n.box > .content .list .company[data-v-57c68ee2] {\n  width: 100%;\n  box-sizing: border-box;\n  border: 1px solid #dedede;\n  padding: 5px;\n  color: #296db6;\n  background-color: #f2f2f2;\n  margin-bottom: 10px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n          justify-content: space-between;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.box > .content .list .company .check[data-v-57c68ee2] {\n  margin: 0 8px;\n  width: 20px;\n  height: 20px;\n  background-image: url("+n("V8Ph")+");\n  background-size: 100% 100%;\n}\n.box > .content .list .company .name[data-v-57c68ee2] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  font-size: 16px;\n  height: 32px;\n  line-height: 32px;\n}\n.box > .content .list .company .status[data-v-57c68ee2] {\n  font-size: 14px;\n  color: #a7a7a7;\n  margin: 0 8px;\n  height: 25px;\n  line-height: 25px;\n}\n.box > .content .list .company.company-selected .check[data-v-57c68ee2] {\n  background-image: url("+n("jVEg")+");\n}\n.box > .content .list .company.company-disabled[data-v-57c68ee2] {\n  color: #999;\n}\n.box > .content .list .company.company-disabled .check[data-v-57c68ee2] {\n  background-image: url("+n("kqJI")+");\n}\n.box > .content .footer[data-v-57c68ee2] {\n  margin: 0 5%;\n  text-align: center;\n}\n.box > .content .footer .prompt[data-v-57c68ee2] {\n  color: #fff;\n  font-size: 14px;\n}\n.box > .content .footer .btn[data-v-57c68ee2] {\n  display: inline-block;\n  margin: 15px 10px 15px 10px;\n  width: 195px;\n  height: 38px;\n  background: url("+n("qtPQ")+") no-repeat;\n  background-size: 100% 100%;\n  /*background-color: #fee66d;*/\n  /*color: #fd6e21;*/\n  /*font-size: 20px;*/\n  /*line-height: 41px;*/\n  box-shadow: 2px 2px 5px #1970ac;\n}\n.box > .content .footer .btn[data-v-57c68ee2]:active {\n  /*background-color: #feef6d;*/\n  background: url("+n("OLs+")+") no-repeat;\n  background-size: 100% 100%;\n}\n.box > .content .footer .btn.weui-btn_disabled[data-v-57c68ee2] {\n  /*background-color: #e3e3e3;*/\n  background: url("+n("wUQ7")+") no-repeat;\n  background-size: 100% 100%;\n}\n",""])},"vy4+":function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[e._m(0),e._v(" "),n("section",{staticClass:"content"},[e._m(1),e._v(" "),n("scroller",{ref:"scroller",staticClass:"list",attrs:{"lock-x":"","scrollbar-y":!1,bounce:!0},on:{"on-scroll":e.onScroll}},[n("checker",{ref:"list",attrs:{type:"checkbox","default-item-class":"company","selected-item-class":"company-selected","disabled-item-class":"company-disabled"},model:{value:e.selectedCompany,callback:function(t){e.selectedCompany=t},expression:"selectedCompany"}},[e._l(e.companyList,function(t,a){return n("checker-item",{key:t.companyId,attrs:{value:t,disabled:t.actived}},[n("div",{staticClass:"check"}),n("div",{staticClass:"name"},[e._v(e._s(t.companyName))]),n("div",{staticClass:"status"},[e._v(e._s(t.status))])])}),e._v(" "),0!=e.companyList.length?n("div",{staticClass:"footer"},[n("div",{staticClass:"prompt"}),e._v(" "),n("x-button",{staticClass:"btn",attrs:{disabled:e.canNotSubmit},nativeOn:{click:function(t){e.submit()}}})],1):e._e()],2)],1)],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"header"},[a("img",{staticClass:"logo",attrs:{src:n("s/VG"),alt:""}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[n("p",{staticClass:"desc"},[e._v("\n                K米平台(简称K米)是福建凯米网络科技有限公司推出的一套“互联网+KTV”联网娱乐增值系统，为商家提供了 K米手机点歌、K米在线超市、K米预订、K米电子会员卡、K米红包、K米客、K米CRM 等(以下简称K米相关产品)整套 或者部分功能。为K歌用户提供了便捷、新颖、有趣的娱乐体验。\n            ")])])}]}},wUQ7:function(e,t,n){e.exports=n.p+"static/img/btn_d.87ee43d.png"}});