webpackJsonp([29],{"CS+T":function(t,e,a){var i=a("CWSs");t.exports={getMemberIndexUrl:function(){return i.createAjaxUrl("memberDailyReport/yesterday")},getMemberPictureUrl:function(){return i.createAjaxUrl("memberPicture/show")},getMemberDetailsUrl:function(t,e){return i.createAjaxUrl("memberDailyReport/membercardDetails?startDate="+t+"&endDate="+e)},getMemberReportUrl:function(t,e,a){return i.createAjaxUrl("memberDailyReport/customize?startDate="+t+"&endDate="+e+"&companycode="+a)}}},F7iT:function(t,e,a){e=t.exports=a("FZ+f")(),e.push([t.i,"\n.box .block[data-v-12910793] {\n  background: #fff;\n  padding-top: 15px;\n  padding-bottom: 15px;\n}\n.box .block .title[data-v-12910793] {\n  padding-left: 15px;\n  font-size: 14px;\n}\n.box .block .body[data-v-12910793] {\n  padding-left: 15px;\n  padding-right: 15px;\n  box-sizing: border-box;\n  padding-top: 30px;\n}\n.data-table[data-v-12910793] {\n  width: 100%;\n  box-sizing: border-box;\n}\n.data-table td[data-v-12910793] {\n  text-align: center;\n  width: 16.66%;\n  vertical-align: top;\n  color: #565860;\n}\n",""])},HpwQ:function(t,e,a){a("fjZh");var i=a("VU/8")(a("lT5e"),a("j2b3"),"data-v-12910793",null);t.exports=i.exports},fjZh:function(t,e,a){var i=a("F7iT");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("0c530110",i,!0)},gsSi:function(t,e,a){var i=a("e3l2"),n=i.KTVmeBridge,r=a("tpu8"),o=r.memoize(function(){var t={action:"invalid_token",data:""};try{n.webToNativeRequest(t,"nativeHandler")}catch(t){}});t.exports=function(t,e,a){9e4==t.ret?o():a()}},j2b3:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[t.data["消费金额"]?a("div",[a("div",{staticClass:"block ui-border-b ui-border-t"},[a("div",{staticClass:"title"},[t._v("近一年在本商户消费金额分布")]),t._v(" "),a("div",{staticClass:"body"},[a("table",{staticClass:"data-table",attrs:{cellspacing:"0"}},[a("tr",t._l(t.data["消费金额"],function(e,i){return a("td",{key:i},[a("div",{staticStyle:{width:"100%",height:"100px",position:"relative"}},[a("div",{staticStyle:{position:"absolute",width:"50%",left:"25%",bottom:"0px",background:"#ff9a16"},style:{height:e.rate+"%"}}),t._v(" "),a("div",{staticStyle:{"font-size":"10px",position:"absolute",left:"0px",width:"100%","text-align":"center"},style:{bottom:e.rate+"%"}},[t._v(t._s(e.rate)+"%")])])])})),t._v(" "),t._m(0),t._v(" "),a("tr",t._l(t.data["消费金额"],function(e,i){return a("td",{key:i},[a("span",{staticStyle:{"font-size":"10px"}},[t._v(t._s(e.t))])])}))])])])]):t._e(),t._v(" "),t.data["消费次数"]?a("div",{staticStyle:{"margin-top":"15px"}},[a("div",{staticClass:"block ui-border-b ui-border-t"},[a("div",{staticClass:"title"},[t._v("近一年在本商户消费次数分布")]),t._v(" "),a("div",{staticClass:"body"},[a("table",{staticClass:"data-table",attrs:{cellspacing:"0"}},[a("tr",t._l(t.data["消费次数"],function(e,i){return a("td",{key:i},[a("div",{staticStyle:{width:"100%",height:"100px",position:"relative"}},[a("div",{staticStyle:{position:"absolute",width:"50%",left:"25%",bottom:"0px",background:"#ff9a16"},style:{height:e.rate+"%"}}),t._v(" "),a("div",{staticStyle:{"font-size":"10px",position:"absolute",left:"0px",width:"100%","text-align":"center"},style:{bottom:e.rate+"%"}},[t._v(t._s(e.rate)+"%")])])])})),t._v(" "),t._m(1),t._v(" "),a("tr",t._l(t.data["消费次数"],function(e,i){return a("td",{key:i},[a("span",{staticStyle:{"font-size":"10px"}},[t._v(t._s(e.t))])])}))])])])]):t._e(),t._v(" "),t.data["用户年龄"]?a("div",[a("div",{staticClass:"block ui-border-b ui-border-t",staticStyle:{"margin-top":"15px"}},[a("div",{staticClass:"title"},[t._v("年龄占比")]),t._v(" "),a("div",{staticClass:"body",staticStyle:{"padding-top":"0"}},[a("div",{ref:"grap",staticStyle:{height:"165px"}})])])]):t._e(),t._v(" "),t.data["用户性别"]?a("div",[a("div",{staticClass:"block ui-border-b ui-border-t",staticStyle:{"margin-top":"15px"}},[a("div",{staticClass:"title"},[t._v("性别占比")]),t._v(" "),a("div",{staticClass:"body",staticStyle:{"padding-top":"15px"}},[a("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0"}},[a("tr",t._l(t.data["用户性别"],function(e,i){return a("td",{key:i,style:{width:e.rate+"%"}},[a("div",{staticStyle:{width:"100%",height:"40px"},style:{background:t.colors[i]}})])})),t._v(" "),a("tr",t._l(t.data["用户性别"],function(e,i){return a("td",{key:i,staticStyle:{"text-align":"center","vertical-align":"top"}},[a("span",{staticStyle:{"font-size":"12px",color:"#565860"}},[t._v(t._s(e.t)+" "+t._s(e.rate)+"%")])])}))])])])]):t._e()])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"6"}},[a("div",{staticStyle:{width:"100%",height:"1px",background:"#ebebeb"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"6"}},[a("div",{staticStyle:{width:"100%",height:"1px",background:"#ebebeb"}})])])}]}},lT5e:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mtWM"),n=a.n(i),r=a("I3G/"),o=a.n(r),s=a("UNGY"),d=(a.n(s),a("2sLL")),l=(a.n(d),a("rLAy")),c=(a.n(l),a("rHil")),u=(a.n(c),a("1DHf")),p=(a.n(u),a("odqc")),v=(a.n(p),a("Znkm")),b=(a.n(v),a("Msp2")),f=(a.n(b),a("Bfwr")),h=(a.n(f),a("Y+qm")),g=a("YxJB"),x=(a.n(g),a("3Lt7")),m=(a.n(x),a("rGqP")),y=(a.n(m),a("S8Wg"));a.n(y);n.a.defaults.timeout=15e3;var _=a("PZHe"),S=a("CS+T"),k=a("gsSi"),w=a("e3l2");w.KTVmeBridge;o.a.use(h.a);var C=a("tpu8");e.default={created:function(){this.getData()},methods:{onRefreshUi:function(){var t=this;a.e(48).then(function(e){var i=a("XLwt"),n=i.init(t.$refs.grap),r=["#ff574d","#3e8ff1","#2bc7ff","#20d8dc","#35cd6a","#88dd2c"],o={legend:{type:"scroll",orient:"vertical",right:20,top:10,borderRadius:5,itemWidth:5,itemHeight:5,data:C.addIndex(C.map)(function(t,e){return t.t+" "+t.rate+"%"})(t.data["用户年龄"])},series:[{label:{normal:{show:!1,position:"center"}},name:"姓名",type:"pie",radius:["30%","70%"],center:["25%","46%"],data:C.addIndex(C.map)(function(t,e){return console.log(r[e%r.length]),{value:t.n,name:t.t+" "+t.rate+"%",label:{normal:{color:"#000",height:100}},labelLine:{normal:{lineStyle:{width:2}}},itemStyle:{normal:{color:r[e%r.length]}}}})(t.data["用户年龄"]),itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};n.setOption(o)}.bind(null,a)).catch(a.oe)},getData:function(){var t=this;_.getCompanyInfo(function(e){var a=e.token,i=e.secid;t.isLoad=!0,t.netErr=!1,t.$vux.loading.show({text:"加载中"});var r=S.getMemberPictureUrl();t.data={},n.a.post(r,{},{headers:{"x-auth-token":a,"x-auth-secid":i}}).then(function(e){var a=e.data;t.$vux.loading.hide(),t.isLoad=!1,console.log("获得数据",a),0!=a.ret&&(t.netErr=!0),k(a,{},function(){t.data=a.data,t.$nextTick(function(){t.onRefreshUi()})})}).catch(function(e){t.$vux.loading.hide(),console.log(e),t.netErr=!0,t.isLoad=!1})})}},data:function(){return{colors:["#3e8ff1","#ff574d","#c9c9c9"],data:{netErr:!1,isLoad:!1}}}}}});