webpackJsonp([20],{"+UIV":function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"record"}},[t.isShow?t._e():o("p",{staticClass:"error"},[t._v(t._s(t.errorMsg))]),t._v(" "),t.recordListComputed&&0==t.recordListComputed.length&&t.isShow?o("p",{staticClass:"error"},[t._v("暂无数据")]):t._e(),t._v(" "),t.isShow?o("div",{staticClass:"wrap"},[o("div",{staticClass:"top",class:{borderB:1==t.show}},[o("p",[o("span",{staticClass:"left",class:{isPopup:0==t.isPopup},on:{click:function(e){t.selectPopup(0)}}},[t._v("\n          "+t._s(t.typeText)+"\n          "),o("img",{attrs:{src:n("5wNS"),alt:""}})]),t._v(" "),o("span",{staticClass:"right",class:{isPopup:1==t.isPopup},on:{click:function(e){t.selectPopup(1)}}},[t._v("\n          "+t._s(t.stateText)+"\n          "),o("img",{attrs:{src:n("5wNS"),alt:""}})])])]),t._v(" "),o("timeline",{staticClass:"paddingT"},t._l(t.recordListComputed,function(e,n){return o("timeline-item",{key:n},[o("div",{staticClass:"box"},[o("p",{staticClass:"title"},[1==e.type?o("span",[t._v("远程预订")]):t._e(),t._v(" "),2==e.type?o("span",[t._v("远程打折")]):t._e(),t._v(" "),3==e.type?o("span",[t._v("远程赠送")]):t._e(),t._v(" "),o("span",{staticClass:"time"},[t._v(t._s(e.date))]),t._v(" "),e.status>=1?o("span",{staticClass:"titleRight"},[t._v("成功")]):t._e(),t._v(" "),e.status<1?o("span",{staticClass:"titleRight gray"},[t._v("异常")]):t._e()]),t._v(" "),o("div",{staticClass:"content"},[o("p",[t._v("\n              操作内容:\n              "),o("span",{staticClass:"text"},[t._v(t._s(e.desc))])]),t._v(" "),o("p",[t._v("备注:"+t._s(e.remark))]),t._v(" "),o("p",[t._v("账单号:"+t._s(e.managerVoucher))]),t._v(" "),o("p",[t._v("操作人:"+t._s(e.user))]),t._v(" "),e.status<1?o("p",[t._v("异常原因:"+t._s(e.errorMsg))]):t._e(),t._v(" "),!0===e.enable_cancel&&1===e.status&&1===e.type?o("span",{staticClass:"bottomBtn",on:{click:function(n){t.cancelBook3PX(e)}}},[t._v("取消预订")]):t._e(),t._v(" "),4===e.status&&1===e.type?o("span",{staticClass:"bottomBtn"},[t._v("已取消")]):t._e()])])])})),t._v(" "),o("popup",{staticClass:"popup",attrs:{position:"top"},on:{"on-hide":t.popupHide},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("div",{staticClass:"wrap"},[o("ul",t._l(t.currentOperation,function(e,a){return o("li",{key:a,class:{active:t.isCurrentSelect==a},on:{click:function(e){t.slectList(a)}}},[t._v("\n            "+t._s(e.name)+"\n            "),o("img",{attrs:{src:n("bHeR"),alt:""}})])}))])]),t._v(" "),o("loginModal",{attrs:{showModal:t.showModal},on:{"update:showModal":function(e){t.showModal=e},login:t.login}})],1):t._e()])},staticRenderFns:[]}},"5wNS":function(t,e,n){t.exports=n.p+"static/img/bottom.4ad040f.png"},Nuw2:function(t,e,n){var o=n("y/tQ");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("697bd49f",o,!0)},PtV2:function(t,e,n){var o=n("CWSs");t.exports={cancelBookingUrl3PX:function(){return o.createAjaxUrl("/biz/3px/cancel_booking")},cancelBookingUrl:function(){return o.createAjaxUrl("/biz/3p/cancel_booking")},get3pLogUrl:function(){return o.createAjaxUrl("biz/3p_log/list")},getRoomPresentSendUrl:function(){return o.createAjaxUrl("biz/3px/present/wine")},getRoomPresentLimitUrl:function(){return o.createAjaxUrl("biz/3px/present/limit")},getGoodsDetailUrl:function(){return o.createAjaxUrl("biz/3p/present/set")},getGoodsListUrl:function(){return o.createAjaxUrl("biz/3px/present/menu")},getRoomOrderUrl:function(){return o.createAjaxUrl("biz/3px/booking")},getRoomDiscountUrl:function(){return o.createAjaxUrl("biz/3px/discount")},getRoomDiscountLimitUrl:function(){return o.createAjaxUrl("biz/3px/discount/limit")},getRoomListUrl:function(){return o.createAjaxUrl("rooms/states")},getRoomListUrl2:function(){return o.createAjaxUrl("biz3/box_states")},getRoomInfoUrl:function(t){return""==t?o.createAjaxUrl("biz3/box_info?companycode="+t):o.createAjaxUrl("biz3/jumpin_box?companycode="+t)},getRoomMemberInfoUrl:function(){return o.createAjaxUrl("nbs/member_info")},getRoomSendWish:function(){return o.createAjaxUrl("biz/wish/info")},getSendWishPageUrl:function(t){return t?"http://www.ktvme.com/bless/merchants":"http://192.168.97.106/bless/merchants?kpm_channel=01230123"},roomStaetConvert:function(t){var e={1:[1,"空闲"],2:[2,"结帐"],7:[2,"结帐"],3:[3,"预订"],4:[4,"锁定"],14:[4,"锁定"],5:[5,"使用"],10:[10,"带客"],12:[12,"故障"],16:[16,"买钟"],17:[17,"清洁"],22:[22,"测机"]};return void 0==e[t]?[0,"非开房"]:e[t]},colorMap:{0:"#000",1:"#7ecae4",7:"#57bc54",2:"#57bc54",4:"#2882d8",5:"#dc5563",3:"#9958b4",6:"#dc5563",8:"#dc5563",9:"#dc5563",10:"#e2551d",12:"#54575d",16:"#fea531",17:"#22BCBC",18:"#dc5563",19:"#dc5563",22:"#AD1488"}}},SfE0:function(t,e,n){t.exports=n.p+"static/img/close.4b33d82.png"},U4WZ:function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,"\n#loginModal[data-v-a77e235a] {\n  position: fixed;\n  width: 100%;\n  top: 0;\n  z-index: 999;\n}\n#loginModal .dialogA[data-v-a77e235a] {\n  font-size: 16px;\n  height: 200px;\n  position: absolute;\n  top: 100px;\n  left: 0;\n  width: 100%;\n  z-index: 999;\n}\n#loginModal .dialogA .box[data-v-a77e235a] {\n  width: 85%;\n  margin: 0 auto;\n}\n#loginModal .dialogA .box .close[data-v-a77e235a] {\n  width: 28px;\n  position: absolute;\n  top: -42px;\n  right: 0px;\n  color: #fff;\n  z-index: 999;\n}\n#loginModal .dialogA .box .title[data-v-a77e235a] {\n  font-size: 16px;\n  text-align: left;\n  margin: 10px 0;\n}\n#loginModal .dialogA .box .remember[data-v-a77e235a] {\n  text-align: left;\n  margin: -5px 0 0 0;\n}\n#loginModal .dialogA .box .remember span[data-v-a77e235a] {\n  background: #fff;\n  display: inline-block;\n  width: 14px;\n  height: 14px;\n  border: 1px solid #999;\n  border-radius: 50%;\n  vertical-align: sub;\n  position: relative;\n}\n#loginModal .dialogA .box .remember span img[data-v-a77e235a] {\n  width: 10.2px;\n  height: 7.2px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n#loginModal .dialogA .box .remember .active[data-v-a77e235a] {\n  background: #2780f8;\n  border: 1px solid #2780f8;\n}\n#loginModal .dialogA .box p[data-v-a77e235a] {\n  width: 100%;\n  position: relative;\n  margin-bottom: 10px;\n}\n#loginModal .dialogA .box p label[data-v-a77e235a] {\n  position: absolute;\n  left: 5%;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n  z-index: 9;\n}\n#loginModal .dialogA .box p .input[data-v-a77e235a] {\n  padding-left: 20%;\n  border: none;\n  background: #f2f2f2;\n  border-radius: 5px;\n}\n#loginModal .dialogA .dialogBottom[data-v-a77e235a] {\n  padding: 15px;\n  padding-top: 5px;\n}\n#loginModal .dialogA .dialogBottom .ok[data-v-a77e235a] {\n  height: 40px;\n  line-height: 40px;\n  color: #fff;\n  font-size: 16px;\n  width: 95%;\n  background: #2780f8;\n  border-radius: 5px;\n  margin: 0 auto;\n}\n",""])},"aPf/":function(t,e,n){var o=n("U4WZ");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("3c716f2f",o,!0)},bHeR:function(t,e,n){t.exports=n.p+"static/img/select.7f7e239.png"},ete7:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"loginModal"}},[t.showModal?o("x-dialog",{staticClass:"dialogA",model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[o("div",{staticClass:"box"},[o("img",{staticClass:"close",attrs:{src:n("SfE0")},on:{click:t.closeModal}}),t._v(" "),o("p",{staticClass:"title"},[t._v("请输入管理系统账号密码")]),t._v(" "),o("p",[o("label",{attrs:{for:"user"}},[t._v("账号")]),t._v(" "),o("x-input",{staticClass:"input",attrs:{"show-clear":!1,id:"user",max:16,type:"text",value:""},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),o("p",[o("label",{attrs:{for:"pass"}},[t._v("密码")]),t._v(" "),o("x-input",{staticClass:"input",attrs:{"show-clear":!1,id:"pass",type:"password",max:16,value:""},model:{value:t.passWord,callback:function(e){t.passWord=e},expression:"passWord"}})],1),t._v(" "),o("p",{staticClass:"remember",on:{click:t.rememberUser}},[o("span",{class:{active:t.isRemember}},[o("img",{attrs:{src:n("mzrW"),alt:""}})]),t._v(" 记住密码\n      ")])]),t._v(" "),o("toast",{attrs:{type:"text"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v(t._s(t.mes))]),t._v(" "),o("div",{staticClass:"dialogBottom"},[o("div",{staticClass:"ok",on:{click:t.validation}},[t._v("提交")]),t._v(" "),o("div",{staticStyle:{clear:"both"}})])],1):t._e()],1)},staticRenderFns:[]}},jhTA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Xxa5"),a=n.n(o),i=n("mvHQ"),s=n.n(i),r=n("exGp"),l=n.n(r),c=n("//Fk"),p=n.n(c),d=n("I3G/"),u=n.n(d),h=n("mtWM"),g=n.n(h),f=n("li2t"),b=n.n(f),m=n("rLAy"),x=n.n(m),v=n("/kga"),w=n.n(v),_=n("Y+qm"),k=n("3BeM"),y=n("hv8u"),j=n.n(y),C=n("AoBP"),M=n.n(C),U=n("HD9R"),S=n.n(U),A=n("162o"),O=(n.n(A),n("PtV2")),P=n("PZHe"),R=n("e3l2"),z=R.KTVmeBridge;u.a.use(_.a),u.a.use(k.a),e.default={components:{Toast:x.a,XDialog:w.a,LoadingPlugin:_.a,ToastPlugin:k.a,Timeline:j.a,TimelineItem:M.a,Popup:S.a,loginModal:b.a},computed:{recordListComputed:function(){var t=void 0,e=void 0,n=this.operationObj[0][this.isSelectA].type,o=this.operationObj[1][this.isSelectB].type;return console.log(this.recordList.filter(function(a){return t=0==n||a.type==n,e=0==o||a.status==o,t&&e})),this.recordList.filter(function(a){return t=0==n||a.type==n,e=0==o||a.status==o,t&&e})}},data:function(){return{userObj:{},resultFunc:null,showModal:!1,typeText:"全部操作",stateText:"全部状态",show:!1,isShow:!1,isPopup:-1,isCurrentSelect:-1,isSelectA:0,isSelectB:0,errorMsg:"",recordList:[],operationObj:{0:[{name:"全部操作",type:0},{name:"预订",type:1},{name:"打折",type:2},{name:"赠送",type:3}],1:[{name:"全部状态",type:0},{name:"成功",type:1},{name:"异常",type:-1}]},currentOperation:{}}},mounted:function(){this.getData()},methods:{login:function(t){console.log(t),this.userObj=t,this.resultFunc(!0)},returnResult:function(){var t=this;return this.showModal=!0,new p.a(function(e,n){t.resultFunc=e})},popupHide:function(){this.isPopup=-1},selectPopup:function(t){this.isPopup==t?this.show=!this.show:(this.show=!0,this.currentOperation=this.operationObj[t]),this.isCurrentSelect=0==t?this.isSelectA:this.isSelectB,this.isPopup=t},slectList:function(t){0==this.isPopup?(this.isSelectA=t,this.typeText=this.operationObj[0][t].name):(this.isSelectB=t,this.stateText=this.operationObj[1][t].name),this.isCurrentSelect=t,this.show=!1},confirm:function(){},getData:function(){var t=this;this.$vux.loading.show({text:"加载中"}),P.getCompanyInfo(function(e){var n=e.token,o=e.secid,a=O.get3pLogUrl();g.a.post(a,{status:"",type:""},{headers:{"x-auth-token":n,"x-auth-secid":o}}).then(function(e){var n=e.data;t.isShow=!0,t.$vux.loading.hide(),console.log(n),0==n.ret?(t.isShow=!0,t.recordList=n.data):(t.isShow=!1,t.errorMsg=n.msg)}).catch(function(e){t.$vux.loading.hide(),t.isShow=!1,t.errorMsg="服务器出现小问题,请稍后重试!!",console.log(e)})})},cancelBook3PX:function(t){var e=this;return l()(a.a.mark(function n(){var o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=void 0,console.log("取消预订中..."),n.next=4,e.returnResult();case 4:if(o=n.sent){n.next=7;break}return n.abrupt("return");case 7:P.getCompanyInfo(function(n){var o=n.token,a=n.secid,i=O.cancelBookingUrl3PX(),r=void 0,l=void 0,c=void 0;r=e.userObj.user,l=e.userObj.pass,c=t.id,console.log(r,l,c),e.$vux.loading.show({text:"加载中"}),z.encrypt({data:s()({StaffCode:r,password:l,voucher:c}),sign:"1",cb:function(n){0==n.code?(console.log("加密结果:"+n.data),g.a.post(i,{data:n.data},{headers:{"x-auth-token":o,"x-auth-secid":a}}).then(function(n){var o=n.data;e.$vux.loading.hide(),console.log(o),0==o.ret?(e.$vux.toast.show({text:o.msg,type:"text"}),t.status=4):e.$vux.toast.show({text:o.msg,type:"text"})}).catch(function(t){e.$vux.loading.hide(),e.$vux.toast.show({text:data.msg,type:"text"}),console.log(t)})):console.log("加密失败:"+n.msg)}})});case 8:case"end":return n.stop()}},n,e)}))()},cancelBook:function(t){var e=this;return l()(a.a.mark(function n(){var o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=void 0,console.log("取消预订中..."),n.next=4,e.returnResult();case 4:if(o=n.sent){n.next=7;break}return n.abrupt("return");case 7:console.log("已取消预定"),P.getCompanyInfo(function(n){var o=n.token,a=n.secid,i=O.cancelBookingUrl(),s=void 0,r=void 0,l=void 0;s=e.userObj.user,r=e.userObj.pass,l=t.id,console.log(s,r,l),g.a.post(i,{StaffCode:s,password:r,voucher:l},{headers:{"x-auth-token":o,"x-auth-secid":a}}).then(function(n){var o=n.data;console.log(o),0==o.ret?(e.$vux.toast.show({text:o.msg,type:"text"}),t.status=4):e.$vux.toast.show({text:o.msg,type:"text"})}).catch(function(t){e.$vux.toast.show({text:data.msg,type:"text"}),console.log(t)})});case 9:case"end":return n.stop()}},n,e)}))()}}}},li2t:function(t,e,n){n("aPf/");var o=n("VU/8")(n("tjF+"),n("ete7"),"data-v-a77e235a",null);t.exports=o.exports},mzrW:function(t,e,n){t.exports=n.p+"static/img/tick.fd7ae81.png"},qcNn:function(t,e,n){n("Nuw2");var o=n("VU/8")(n("jhTA"),n("+UIV"),"data-v-34b46700",null);t.exports=o.exports},"tjF+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("mvHQ"),a=n.n(o),i=n("pDNl"),s=n.n(i),r=n("2sLL"),l=n.n(r),c=n("rLAy"),p=n.n(c),d=n("/kga"),u=n.n(d),h=n("Y+qm");e.default={props:{showModal:{default:!1,type:Boolean}},components:{XInput:s.a,XButton:l.a,Toast:p.a,XDialog:u.a,LoadingPlugin:h.a},mounted:function(){this.init()},data:function(){return{show:!1,userName:"",passWord:"",isRemember:!0,userObj:{},mes:""}},computed:{},methods:{closeModal:function(){this.$emit("update:showModal",!1)},rememberUser:function(){this.isRemember=!this.isRemember,localStorage.setItem("isRemember",this.isRemember)},validation:function(){if(this.userObj={},this.userObj.user=this.userName,this.userObj.pass=this.passWord,""==this.userName?this.mes="请输入账号!":""==this.passWord&&(this.mes="请输入密码!"),""==this.userName||""==this.passWord)return void(this.show=!0);this.$emit("login",this.userObj),this.$emit("update:showModal",!1),this.isRemember?localStorage.setItem("userObj",a()(this.userObj)):localStorage.removeItem("userObj")},init:function(){localStorage.getItem("isRemember")&&"false"==localStorage.getItem("isRemember")?this.isRemember=!1:this.isRemember=!0,localStorage.getItem("userObj")&&(this.userObj=JSON.parse(localStorage.getItem("userObj")),this.userName=this.userObj.user,this.passWord=this.userObj.pass)}},watch:{}}},"y/tQ":function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,"\n#record .paddingT[data-v-34b46700] {\n  padding-top: 60px;\n}\n#record .error[data-v-34b46700] {\n  position: absolute;\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: #ccc;\n}\n#record .top[data-v-34b46700] {\n  width: 100%;\n  height: 45px;\n  background: #fff;\n  line-height: 45px;\n  position: fixed;\n  z-index: 999;\n  font-size: 15px;\n}\n#record .top .left[data-v-34b46700],\n#record .top .right[data-v-34b46700] {\n  width: 50%;\n  float: left;\n  height: 100%;\n  text-align: center;\n  -webkit-transition: all 0.6s;\n  transition: all 0.6s;\n}\n#record .top .left img[data-v-34b46700],\n#record .top .right img[data-v-34b46700] {\n  width: 8px;\n  height: 8px;\n  vertical-align: middle;\n}\n#record .top .isPopup img[data-v-34b46700] {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n#record .borderB[data-v-34b46700] {\n  border-bottom: 1px solid #f2f2f2;\n}\n#record .box[data-v-34b46700] {\n  margin-left: 8px;\n  border-radius: 5px;\n}\n#record .box .title[data-v-34b46700] {\n  padding: 10px;\n  height: 20px;\n  font-size: 16px;\n  color: #2e83f4;\n  background: #eef5fe;\n  position: relative;\n  line-height: 20px;\n}\n#record .box .title .titleRight[data-v-34b46700] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: block;\n  width: 77px;\n  height: 100%;\n  text-align: center;\n  background: #ff9200;\n  line-height: 40px;\n  color: #fff;\n}\n#record .box .title .gray[data-v-34b46700] {\n  background: #cccccc;\n}\n#record .box .title .time[data-v-34b46700] {\n  position: absolute;\n  top: 0;\n  left: 50%;\n  display: block;\n  height: 100%;\n  text-align: center;\n  line-height: 40px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  font-size: 12px;\n  color: #929298;\n}\n#record .box .content[data-v-34b46700] {\n  background: #fff;\n  padding: 10px;\n  position: relative;\n  color: #929298;\n  border-bottom-right-radius: 8px;\n  border-bottom-left-radius: 8px;\n}\n#record .box .content .text[data-v-34b46700] {\n  white-space: pre-line;\n}\n#record .box .content .bottomBtn[data-v-34b46700] {\n  width: 100px;\n  height: 35px;\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  background: #2e83f4;\n  text-align: center;\n  line-height: 35px;\n  color: #fff;\n  border-radius: 5px;\n}\n#record .popup[data-v-34b46700] {\n  width: 100%;\n  position: fixed;\n  background: #fff;\n  top: 44px;\n}\n#record .popup .wrap[data-v-34b46700] {\n  padding-left: 15px;\n  list-style: none;\n  font-size: 14px;\n}\n#record .popup .wrap ul[data-v-34b46700] {\n  list-style: none;\n  border: none;\n}\n#record .popup .wrap ul li[data-v-34b46700] {\n  height: 40px;\n  width: 100%;\n  border-bottom: 1px solid #f2f2f2;\n  line-height: 40px;\n  position: relative;\n  font-size: 15px;\n}\n#record .popup .wrap ul li[data-v-34b46700]:nth-last-of-type(1) {\n  border-bottom: none;\n}\n#record .popup .wrap ul li img[data-v-34b46700] {\n  display: none;\n  width: 22px;\n  height: 22px;\n  position: absolute;\n  right: 15px;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n#record .popup .wrap ul .active[data-v-34b46700] {\n  color: #2e83f4;\n}\n#record .popup .wrap ul .active img[data-v-34b46700] {\n  display: block;\n}\n",""])}});